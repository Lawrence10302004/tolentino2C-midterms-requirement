<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Men's Perfume | Haven</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="navbar-container"></div>

    <!-- Men's Perfume Grid -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">Men's Perfume Collection</h2>
        <div class="row">
            <!-- Perfume 1 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/dior/dior_sauvage.webp" class="card-img-top" alt="Dior Sauvage">
                    <div class="card-body">
                        <h6 class="opacity">Dior</h6>
                        <h3 class="card-title"><b>Sauvage</b></h3>
                        <h7 class="card-title">Eau de Parfum Spray</h7>
                        <p class="card-text">₱6,312 / 60 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/dior.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Perfume 2 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/ck/ck1.jfif" class="card-img-top" alt="Perfume 2">
                    <div class="card-body">
                        <h6 class="opacity">Calvin Klein</h6>
                        <h3 class="card-title"><b>CK Be</b></h3>
                        <h7 class="card-title">Eau de Toilette Spray</h7>
                        <p class="card-text">₱1,500 / 100 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/calvin-klein.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Perfume 3 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/invictus/invi1.webp" class="card-img-top" alt="Perfume 3">
                    <div class="card-body">
                        
                            <h6 class="opacity">Rabanne</h6>
                            <h3 class="card-title"><b>Invictus</b></h3>
                            <h7 class="card-title">Eau de Toilette Spray</h7>
                            <p class="card-text">₱5,033 / 50 ml</p>
                            <p class="card-text">⭐⭐⭐⭐☆</p>
                            <a href="/men's perfume/invictus.html" class="btn btn-primary view-details">View Details</a>
                           
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 4 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/bleu/bleu4.jpg" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Chanel</h6>
                        <h3 class="card-title"><b>Bleu De Chanel</b></h3>
                        <h7 class="card-title">Eau de Parfum Spray</h7>
                        <p class="card-text">₱6,291 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐⭐</p>
                        <a href="/men's perfume/bleu.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 5 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/stronger/stronger1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Armani</h6>
                        <h3 class="card-title"><b>Stronger with You Intensely</b></h3>
                        <h7 class="card-title">Eau de Parfum Spray</h7>
                        <p class="card-text">₱5,181 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐⭐</p>
                        <a href="/men's perfume/stronger.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 6 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/one/one1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Rabanne</h6>
                        <h3 class="card-title"><b>1 Million</b></h3>
                        <h7 class="card-title">Eau de Toilette Spray</h7>
                        <p class="card-text">₱4,885 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/one.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 7 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/valen/valen1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Valentino</h6>
                        <h3 class="card-title"><b>Born In Roma Uomo Intense</b></h3>
                        <h7 class="card-title">Eau de Parfum Spray</h7>
                        <p class="card-text">₱5,551 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐⭐</p>
                        <a href="/men's perfume/valentino.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 8 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/lemale/lemale1.avif" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Jean Paul Gaultier</h6>
                        <h3 class="card-title"><b>Le Male Elixir</b></h3>
                        <h7 class="card-title">Parfum Spray</h7>
                        <p class="card-text">₱6,439 / 75 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/lemale.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 9 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/swy/swy1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Armani</h6>
                        <h3 class="card-title"><b>Stronger With You</b></h3>
                        <h7 class="card-title">Parfum Spray</h7>
                        <p class="card-text">₱5,847 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐☆☆</p>
                        <a href="/men's perfume/swy.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 10 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/lemalep/lemalep1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Jean Paul Gaultier</h6>
                        <h3 class="card-title"><b>Le Male Le Parfum</b></h3>
                        <h7 class="card-title">Eau de Parfum Spray</h7>
                        <p class="card-text">₱5,995 / 75 ml</p>
                        <p class="card-text">⭐⭐⭐⭐⭐</p>
                        <a href="/men's perfume/lemalep.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 11 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/eros/eros1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Versace</h6>
                        <h3 class="card-title"><b>Eros</b></h3>
                        <h7 class="card-title">Eau de Parfum Spray</h7>
                        <p class="card-text">₱5,477 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/eros.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 12 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/dylan/dylan1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Versace</h6>
                        <h3 class="card-title"><b>Dylan Blue</b></h3>
                        <h7 class="card-title">Eau de Toilette Spray</h7>
                        <p class="card-text">₱2,959 / 30 ml</p>
                        <p class="card-text">⭐⭐⭐⭐⭐</p>
                        <a href="/men's perfume/dylan.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 13 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/dior-homme/homme1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Dior</h6>
                        <h3 class="card-title"><b>Dior Homme</b></h3>
                        <h7 class="card-title">Eau de Toilette Spray</h7>
                        <p class="card-text">₱5,551 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/dior-homme.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 14 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/wanted/wanted1.webp" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Azzaro</h6>
                        <h3 class="card-title"><b>Wanted</b></h3>
                        <h7 class="card-title">Eau de Toilette Spray</h7>
                        <p class="card-text">₱4,367 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐⭐</p>
                        <a href="/men's perfume/wanted.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
            <!-- Repeat for Perfumes 15 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 hover-effect">
                    <img src="/perfumes images/mens/guilty/guilty1.jpg" class="card-img-top" alt="Perfume 4">
                    <div class="card-body">
                        <h6 class="opacity">Gucci</h6>
                        <h3 class="card-title"><b>Guilty Pour Homme</b></h3>
                        <h7 class="card-title">Eau de Toilette Spray</h7>
                        <p class="card-text">₱5,107 / 50 ml</p>
                        <p class="card-text">⭐⭐⭐⭐☆</p>
                        <a href="/men's perfume/guilty.html" class="btn btn-primary view-details">View Details</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-container"></div>


    <a href="/index.html" class="back-button mt-3">
        <i class="fas fa-arrow-left"></i> Back to Homepage
    </a>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cart and wishlist from localStorage
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        
            // Load navbar and initialize functionality
            fetch('navbar.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('navbar-container').innerHTML = data;
                    
                    // Update badge counts
                    updateBadges();
                    
                    // Setup search functionality
                    setupSearch();
                    
                    // Setup cart/wishlist icon click handlers
                    setupCartWishlist();
                })
                .catch(error => console.error('Error loading navbar:', error));
        
            // Function to update badge counts
            function updateBadges() {
                const cartBadge = document.getElementById('cart-badge');
                const wishlistBadge = document.getElementById('wishlist-badge');
                
                if (cartBadge) cartBadge.textContent = cart.length;
                if (wishlistBadge) wishlistBadge.textContent = wishlist.length;
                
                // Save to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                localStorage.setItem('wishlist', JSON.stringify(wishlist));
            }
        
            // Function to show notification
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.add('fade-out');
                    setTimeout(() => notification.remove(), 500);
                }, 3000);
            }
        
            // Setup cart and wishlist icon functionality
            function setupCartWishlist() {
                // Cart icon click handler
                document.querySelector('.fa-shopping-cart')?.closest('a')?.addEventListener('click', function(e) {
                    e.preventDefault();
                    showCartModal();
                });
        
                // Wishlist icon click handler
                document.querySelector('.fa-heart')?.closest('a')?.addEventListener('click', function(e) {
                    e.preventDefault();
                    showWishlistModal();
                });
            }
        
            // Show cart modal
            function showCartModal() {
                const modalContent = `
                    <div class="modal fade" id="cartModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Your Cart (${cart.length})</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    ${cart.length === 0 ? 
                                        '<p>Your cart is empty</p>' : 
                                        cart.map(item => `
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="flex-grow-1">
                                                    <h6 class="mb-0">${item.name}</h6>
                                                    <small>$${item.price} × ${item.quantity}</small>
                                                </div>
                                                <button class="btn btn-sm btn-outline-danger remove-cart-item" data-id="${item.id}">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        `).join('')}
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    ${cart.length > 0 ? '<button type="button" class="btn btn-primary">Checkout</button>' : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
        
                document.body.insertAdjacentHTML('beforeend', modalContent);
                const modal = new bootstrap.Modal(document.getElementById('cartModal'));
                modal.show();
        
                // Handle item removal
                document.querySelectorAll('.remove-cart-item').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const itemId = this.dataset.id;
                        cart = cart.filter(item => item.id !== itemId);
                        updateBadges();
                        modal.hide();
                        document.getElementById('cartModal').remove();
                        showCartModal();
                    });
                });
        
                // Cleanup on modal close
                document.getElementById('cartModal').addEventListener('hidden.bs.modal', function() {
                    this.remove();
                });
            }
        
            // Show wishlist modal
            function showWishlistModal() {
                const modalContent = `
                    <div class="modal fade" id="wishlistModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Your Wishlist (${wishlist.length})</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    ${wishlist.length === 0 ? 
                                        '<p>Your wishlist is empty</p>' : 
                                        wishlist.map(item => `
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="flex-grow-1">
                                                    <h6 class="mb-0">${item.name}</h6>
                                                    <small>$${item.price}</small>
                                                </div>
                                                <button class="btn btn-sm btn-outline-danger remove-wishlist-item" data-id="${item.id}">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success ms-2 move-to-cart" data-id="${item.id}">
                                                    <i class="fas fa-cart-plus"></i>
                                                </button>
                                            </div>
                                        `).join('')}
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
        
                document.body.insertAdjacentHTML('beforeend', modalContent);
                const modal = new bootstrap.Modal(document.getElementById('wishlistModal'));
                modal.show();
        
                // Handle item removal
                document.querySelectorAll('.remove-wishlist-item').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const itemId = this.dataset.id;
                        wishlist = wishlist.filter(item => item.id !== itemId);
                        updateBadges();
                        modal.hide();
                        document.getElementById('wishlistModal').remove();
                        showWishlistModal();
                    });
                });
        
                // Handle move to cart
                document.querySelectorAll('.move-to-cart').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const itemId = this.dataset.id;
                        const item = wishlist.find(item => item.id === itemId);
                        
                        if (item) {
                            addToCart({...item, quantity: 1});
                            wishlist = wishlist.filter(item => item.id !== itemId);
                            updateBadges();
                            modal.hide();
                            document.getElementById('wishlistModal').remove();
                            showWishlistModal();
                        }
                    });
                });
        
                // Cleanup on modal close
                document.getElementById('wishlistModal').addEventListener('hidden.bs.modal', function() {
                    this.remove();
                });
            }
        
            // Global functions to add items
            window.addToCart = function(perfume) {
                const existingItem = cart.find(item => item.id === perfume.id);
                
                if (existingItem) {
                    existingItem.quantity += perfume.quantity || 1;
                } else {
                    cart.push({
                        id: perfume.id,
                        name: perfume.name,
                        price: perfume.price,
                        quantity: perfume.quantity || 1
                    });
                }
                
                updateBadges();
                showNotification('Added to cart!');
            };
            
            window.addToWishlist = function(perfume) {
                if (!wishlist.some(item => item.id === perfume.id)) {
                    wishlist.push({
                        id: perfume.id,
                        name: perfume.name,
                        price: perfume.price
                    });
                    updateBadges();
                    showNotification('Added to wishlist!');
                } else {
                    showNotification('Already in wishlist!');
                }
            };
        
            // Search functionality (original with slight enhancements)
            function setupSearch() {
                const searchInput = document.getElementById('perfume-search');
                const searchResults = document.getElementById('search-results');
                
                if (!searchInput || !searchResults) return;
        
                let allPerfumes = [];
        
                async function loadPerfumes() {
                    try {
                        const [mens, womens] = await Promise.all([
                            fetch('mens.html').then(r => r.text()),
                            fetch('womens.html').then(r => r.text())
                        ]);
                        
                        const parser = new DOMParser();
                        const getData = (html) => {
                            const doc = parser.parseFromString(html, 'text/html');
                            return Array.from(doc.querySelectorAll('.col-md-4')).map(card => {
                                const link = card.querySelector('a');
                                return {
                                    id: card.dataset.id || Math.random().toString(36).substr(2, 9),
                                    name: card.querySelector('.card-title b, .card-title')?.textContent?.trim() || 'Unknown',
                                    brand: card.querySelector('.opacity')?.textContent?.trim() || 'Unknown',
                                    price: parseFloat(card.querySelector('.price')?.textContent?.replace(/[^\d.]/g, '')) || 0,
                                    link: link?.href || '#',
                                    image: card.querySelector('img')?.src || ''
                                };
                            });
                        };
                        
                        allPerfumes = [...getData(mens), ...getData(womens)];
                    } catch (error) {
                        console.error('Error loading perfumes:', error);
                        searchResults.innerHTML = `<div class="dropdown-item text-danger">Error loading perfumes</div>`;
                        searchResults.style.display = 'block';
                    }
                }
        
                function showResults(term) {
                    term = term.toLowerCase().trim();
                    searchResults.innerHTML = '';
                    
                    if (term.length < 2) {
                        searchResults.style.display = 'none';
                        return;
                    }
        
                    const matches = allPerfumes.filter(p => 
                        p.name.toLowerCase().includes(term) || 
                        p.brand.toLowerCase().includes(term)
                    ).slice(0, 5);
        
                    if (matches.length) {
                        matches.forEach(p => {
                            const item = document.createElement('div');
                            item.className = 'dropdown-item d-flex justify-content-between align-items-center py-2 px-3';
                            item.innerHTML = `
                                <a href="${p.link}" class="text-decoration-none flex-grow-1">
                                    <strong>${p.name}</strong>
                                    <div class="text-muted small">${p.brand}</div>
                                </a>
                                <button class="btn btn-sm btn-outline-primary ms-2 add-to-cart-search" 
                                        data-id="${p.id}"
                                        data-name="${p.name}"
                                        data-price="${p.price}">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            `;
                            searchResults.appendChild(item);
                        });
        
                        // Add event listeners to search result buttons
                        document.querySelectorAll('.add-to-cart-search').forEach(btn => {
                            btn.addEventListener('click', function(e) {
                                e.preventDefault();
                                addToCart({
                                    id: this.dataset.id,
                                    name: this.dataset.name,
                                    price: parseFloat(this.dataset.price)
                                });
                            });
                        });
                    } else {
                        searchResults.innerHTML = `
                            <div class="dropdown-item text-muted py-2 px-3">
                                No results for "${term}"
                            </div>`;
                    }
                    searchResults.style.display = 'block';
                }
        
                // Event handlers
                searchInput.addEventListener('focus', () => {
                    if (allPerfumes.length === 0) loadPerfumes();
                });
        
                let timer;
                searchInput.addEventListener('input', (e) => {
                    clearTimeout(timer);
                    timer = setTimeout(() => showResults(e.target.value), 300);
                });
        
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('#search-form')) {
                        searchResults.style.display = 'none';
                    }
                });
        
                document.getElementById('search-form')?.addEventListener('submit', (e) => {
                    e.preventDefault();
                    if (searchResults.firstChild?.querySelector('a')) {
                        window.location.href = searchResults.firstChild.querySelector('a').href;
                    }
                });
            }
        
            // Load footer
            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-container').innerHTML = data;
        
                    // Contact form submission handler
                    const form = document.getElementById('contactForm');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            e.preventDefault();
                            const confirmation = document.getElementById('submitConfirmation');
                            confirmation.textContent = 'Submitted successfully';
                            confirmation.style.opacity = '1';
                            this.reset();
                            setTimeout(() => {
                                confirmation.style.opacity = '0';
                                setTimeout(() => confirmation.textContent = '', 300);
                            }, 3000);
                        });
                    }
                });
        });
        
        // Add some basic styles for notifications
        const style = document.createElement('style');
        style.textContent = `
            .notification {
                position: fixed;
                bottom: 20px;
                right: 20px;
                padding: 10px 20px;
                background-color: #333;
                color: white;
                border-radius: 5px;
                z-index: 10000;
                transition: opacity 0.3s;
            }
            .notification.fade-out {
                opacity: 0;
            }
        `;
        document.head.appendChild(style);
        </script>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
